{
  "name": "Large Remux Optimizer",
  "description": "Compress huge remux files (>20GB) using H.265 NVENC",
  "isEnabled": true,
  "plugins": [
    {
      "name": "Filter by File Size",
      "pluginId": "filterByFileSize",
      "position": 1,
      "settings": {
        "minSize": 20480,
        "action": "continue"
      }
    },
    {
      "name": "Skip if H.265",
      "pluginId": "checkVideoCodec",
      "position": 2,
      "settings": {
        "codec": "hevc",
        "action": "skip_if_match"
      }
    },
    {
      "name": "Transcode to H.265 NVENC",
      "pluginId": "ffmpegCommand",
      "position": 3,
      "settings": {
        "command": "-c:v hevc_nvenc -preset slow -crf 22 -c:a copy -c:s copy",
        "container": ".mkv",
        "outputFolder": "/temp/transcoded"
      }
    },
    {
      "name": "Validate Transcode",
      "pluginId": "validateMediaStream",
      "position": 4,
      "settings": {
        "checkDuration": true,
        "maxDurationDiff": 2
      }
    }
  ]
}